{% extends 'dashboard/base.html' %} {% block content %}
<style>
    .hover-lift { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
    .hover-lift:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.08) !important;
        border: 1px solid #000 !important;
    }
</style>
<div class="container-fluid py-4">
  <div
    class="card border-0 shadow-sm p-4 mb-4"
    style="
      border-radius: 20px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    "
  >
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <span
          class="badge bg-success-subtle text-success rounded-pill px-3 mb-2"
          >Active Member</span
        >
        <h2 class="fw-bold text-dark mb-1">{{ club.club_name }}</h2>
        <p class="text-muted">
          <i class="bi bi-geo-alt me-2"></i>University Main Campus
        </p>
      </div>
      <div class="text-end">
        <p class="small text-muted mb-0">Club Advisor</p>
        <p class="fw-bold mb-0">{{ club.advisor_name }}</p>
      </div>
    </div>
  </div>

  <div class="card border-0 shadow-sm rounded-4 p-4 mt-4">
    <h5 class="fw-bold mb-4"><i class="bi bi-bell me-2"></i>Club Announcements</h5>
    
    <div class="accordion" id="alertsAccordion">
    {% for alert in alerts %}
    <div class="accordion-item border-0 mb-2 shadow-sm rounded-3 overflow-hidden">
        <h2 class="accordion-header" id="heading{{ alert.alert_id }}">
            <button class="accordion-button collapsed fw-bold" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#collapse{{ alert.alert_id }}">
                <i class="bi bi-exclamation-circle-fill me-2 text-danger"></i>
                {{ alert.subject }}
            </button>
        </h2>
        <div id="collapse{{ alert.alert_id }}" class="accordion-collapse collapse" 
             aria-labelledby="heading{{ alert.alert_id }}" data-bs-parent="#alertsAccordion">
            <div class="accordion-body bg-light">
                <p class="mb-2" style="white-space: pre-wrap;">{{ alert.message }}</p>
                <hr class="opacity-25">
                <small class="text-muted">
                    Posted by {{ alert.club.club_name }} on {{ alert.created_at|date:"M d, Y" }}
                </small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
</div>

  <div class="card border-0 shadow-sm p-4" style="border-radius: 20px">
    <h5 class="fw-bold mb-4">Club Members</h5>
    <div class="table-responsive">
      <table class="table align-middle">
        <thead class="table-light">
          <tr class="text-muted small text-uppercase">
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
          </tr>
        </thead>
        <tbody>
          {% for mem in all_members %}
          <tr>
            <td><span class="fw-bold">{{ mem.student.name }}</span></td>
            <td class="text-muted">{{ mem.student.email }}</td>
            <td>
              <span
                class="badge {% if mem.role != 'General Member' %}bg-warning-subtle text-warning-emphasis{% else %}bg-light text-dark{% endif %} rounded-pill"
              >
                {{ mem.role }}
              </span>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center text-muted">
              No members listed.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border-0 shadow-sm p-4" style="border-radius: 20px">
        <h5 class="fw-bold mb-4">
          <i class="bi bi-calendar-event me-2 text-primary"></i>Upcoming Events
        </h5>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          {% for event in club_events %}
          <div class="col">
            <a
              href="{% url 'event_detail' event.event_id %}"
              class="text-decoration-none text-dark"
            >
              <div
                class="card h-100 border-0 shadow-sm rounded-4 hover-lift transition-all"
              >
                <div class="card-body p-4">
                  <div class="d-flex align-items-center gap-3">
                    <div
                      class="bg-light rounded-4 p-3 text-center"
                      style="min-width: 80px"
                    >
                      <small class="text-uppercase text-muted fw-bold d-block"
                        >{{ event.event_date|date:"M" }}</small
                      >
                      <h3 class="fw-bold mb-0">
                        {{ event.event_date|date:"d" }}
                      </h3>
                    </div>

                    <div>
                      <h5 class="fw-bold mb-1">{{ event.event_name }}</h5>
                      <div class="text-muted small">
                        <i class="bi bi-clock me-1"></i> {{event.event_date|date:"h:i A" }}
                      </div>
                      <div class="text-muted small mt-1">
                        <i class="bi bi-geo-alt me-1"></i> {{event.venue|default:"Venue TBA" }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
          {% empty %}
          <div class="col-12">
            <p class="text-muted text-center py-4">
              No upcoming events for this club.
            </p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
