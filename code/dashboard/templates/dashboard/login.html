{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | IntelliClub</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    <div class="login-container">
      <h2>IntelliClub</h2>
      <p>Sign in to manage your club database</p>

      {% if error %}
      <div class="error-msg">{{ error }}</div>
      {% endif %}

      <form method="POST">
        {% csrf_token %}
        <div class="form-group">
          <label>Email Address</label>
          <input
            type="email"
            name="email"
            placeholder="name@university.edu"
            required
          />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input
            type="password"
            name="password"
            placeholder="••••••••"
            required
          />
        </div>
        <button type="submit">Log In</button>
      </form>
      <p style="margin-top: 20px">
        Don't have an account?
        <a
          href="#"
          id="openRegister"
          style="
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 600;
          "
          >Register here</a
        >
      </p>

      <div id="registerModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Student Registration</h2>
          <form method="POST" action="{% url 'register' %}">
            {% csrf_token %}
            <div class="form-grid">
              <input
                type="text"
                name="student_id"
                placeholder="Student ID (e.g. 011...)"
                required
              />
              <input type="text" name="name" placeholder="Full Name" required />
              <input
                type="email"
                name="email"
                placeholder="University Email"
                required
              />
              <input
                type="password"
                name="password"
                placeholder="Create Password"
                required
              />
              <input
                type="text"
                name="department"
                placeholder="Department (e.g. CSE)"
              />
              <input
                type="text"
                name="personality"
                placeholder="Personality Type (e.g. INTJ)"
              />
            </div>
            <button type="submit" style="margin-top: 20px">
              Complete Registration
            </button>
          </form>
        </div>
      </div>
    </div>
    <script>
      const modal = document.getElementById("registerModal");
      const btn = document.getElementById("openRegister");
      const span = document.getElementsByClassName("close")[0];

      btn.onclick = () => (modal.style.display = "block");
      span.onclick = () => (modal.style.display = "none");
      window.onclick = (event) => {
        if (event.target == modal) modal.style.display = "none";
      };
    </script>
  </body>
</html>
