{% extends "dashboard/base.html" %} {% block content %}

<style>
  /* Subtle lift effect for the focus cards */
  .event-card-link {
    text-decoration: none !important;
    display: block;
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
  }
  .event-card-link:hover {
    transform: translateY(-8px);
  }
  .event-card-link:hover .card {
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
    border: 1px solid #000 !important;
  }

  /* Icon circle styling matching your brand */
  .card-icon-circle {
    width: 60px;
    height: 60px;
    background: #fff;
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #000;
  }

  /* Animation for the arrow on hover */
  .btn-get-started i {
    transition: transform 0.2s ease;
  }
  .event-card-link:hover .btn-get-started i {
    transform: translateX(5px);
  }
</style>

<div class="d-flex justify-content-between align-items-end mb-5">
  <div>
    <h2 class="fw-bold fs-1 mb-2" style="letter-spacing: -1px">
      How to start: Choose a focus for today
    </h2>
    <p class="text-muted">
      Explore the latest events tailored for your growth.
    </p>
  </div>
  <a
    href="{% url 'all_events' %}"
    class="btn btn-outline-dark rounded-pill px-4 fw-bold mb-3"
  >
    View All Events <i class="bi bi-arrow-right ms-2"></i>
  </a>
</div>

<div class="row g-4 mb-5">
  {% for event in events %}
  <div class="col-md-4">
    <a href="{% url 'event_detail' event.event_id %}" class="event-card-link">
      <div
        class="card p-4 h-100 border-0 shadow-lg"
        style="border-radius: 24px"
      >
        <div class="card-icon-circle mb-4">
          <i
            class="bi {{ event.display_icon|default:'bi-rocket-takeoff' }} fs-2 text-dark"
          ></i>
        </div>

        <h4 class="fw-bold mb-1 text-dark">{{ event.event_name }}</h4>

        <span
          class="badge bg-light text-dark border rounded-pill mb-3"
          style="width: fit-content"
        >
          {{ event.event_type }}
        </span>

        <p class="text-muted small mb-4">
          {{ event.description|truncatewords:15 }}
        </p>

        <div class="mt-auto pt-3 border-top">
          <div class="btn-get-started w-100 fw-bold text-dark">
            Get started <i class="bi bi-arrow-right ms-2"></i>
          </div>
        </div>
      </div>
    </a>
  </div>
  {% empty %}
  <div class="col-12 text-center py-5 bg-white rounded-4 shadow-sm border">
    <i class="bi bi-search text-muted fs-1"></i>
    <p class="text-muted mt-2">No upcoming focus events found.</p>
  </div>
  {% endfor %}
</div>

<div class="mt-5">
  <h3 class="fw-bold mb-4">My Registered Events</h3>
  <div
    class="card border-0 shadow-sm p-4"
    style="border-radius: 24px; background: rgba(255, 255, 255, 0.8)"
  >
    {% if my_registrations %}
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="text-muted small">
          <tr class="text-uppercase" style="letter-spacing: 1px">
            <th>Event Details</th>
            <th>Date & Time</th>
            <th>Location</th>
            <th class="text-end">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for reg in my_registrations %}
          <tr>
            <td>
              <a
                href="{% url 'event_detail' reg.event.event_id %}"
                class="text-decoration-none"
              >
                <div class="fw-bold text-dark">{{ reg.event.event_name }}</div>
              </a>
              <small class="text-muted">{{ reg.event.event_type }}</small>
            </td>

            <td class="text-muted">
              <div class="fw-bold">{{ reg.event.event_date|date:"M d, Y" }}</div>
              <div class="text-muted small"><i class="bi bi-clock me-1"></i>{{ reg.event.event_date|date:"h:i A" }}</div>
              <small style="font-size: 0.75rem"
                >{{ reg.event.event_time }}</small
              >
            </td>

            <td>
              <span
                class="badge bg-white text-dark border rounded-pill px-3 py-2"
              >
                <i class="bi bi-geo-alt me-1"></i> {{ reg.event.venue }}
              </span>
            </td>

            <td class="text-end">
              <span
                class="{% if reg.payment_status == 'Success' %}text-success{% else %}text-warning{% endif %} fw-bold"
              >
                <i
                  class="bi {% if reg.payment_status == 'Success' %}bi-check-circle-fill{% else %}bi-clock-history{% endif %} me-1"
                ></i>
                {{ reg.payment_status }}
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-5">
      <i class="bi bi-calendar-x text-muted fs-1"></i>
      <p class="text-muted mt-2">You haven't registered for any events yet.</p>
      <a
        href="{% url 'home' %}"
        class="btn btn-dark btn-sm rounded-pill px-4 mt-2"
        >Browse Events</a
      >
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}
