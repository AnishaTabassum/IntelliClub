{% extends "dashboard/base.html" %}
{% load static %}

{% block content %}
<style>
    .card { border: 1px solid #f0f0f0 !important; transition: all 0.3s ease-in-out; }
    .hover-lift:hover {
        transform: translateY(-8px);
        box-shadow: 0 1rem 2rem rgba(0,0,0,.05) !important;
        border-color: #000 !important;
    }
    .badge-upcoming { background-color: #000; color: #fff; }
    .badge-past { background-color: transparent; border: 1px solid #e0e0e0; color: #888; }
    .icon-box { background: #f8f9fa; color: #000; border: 1px solid #eee; }
    .breadcrumb-item a { color: #888; font-size: 0.9rem; transition: color 0.2s; }
    .breadcrumb-item a:hover { color: #000; }
</style>

<div class="container-fluid py-4 px-4">
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="{% url 'club_dashboard' club.club_id %}" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item active fw-semibold text-dark" aria-current="page">Event Management</li>
        </ol>
    </nav>

    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-5 gap-3">
        <div>
            <h2 class="fw-bold mb-1 text-dark">{{ club.club_name }} Events</h2>
            <p class="text-muted small mb-0">Select an event to manage attendees and registration requests.</p>
        </div>
        <a href="{% url 'create_event_page' club.club_id %}" class="btn btn-dark rounded-pill px-4 py-2 shadow-sm fw-bold">
            <i class="bi bi-plus-lg me-2"></i>Create New Event
        </a>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
        {% for link in event_links %}
        <div class="col">
            <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden hover-lift">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div class="icon-box rounded-3 p-2">
                            <i class="bi bi-calendar-event fs-4"></i>
                        </div>
                        {% if link.event.event_date >= current_time %}
                            <span class="badge badge-upcoming rounded-pill px-3 py-2 text-uppercase small" style="letter-spacing: 0.5px;">Upcoming</span>
                        {% else %}
                            <span class="badge badge-past rounded-pill px-3 py-2 text-uppercase small" style="letter-spacing: 0.5px;">Past</span>
                        {% endif %}
                    </div>

                    <h5 class="fw-bold mb-4 text-dark" style="min-height: 3rem;">{{ link.event.event_name }}</h5>
                    
                    <div class="text-secondary small">
                        <div class="d-flex align-items-center mb-2">
                            <i class="bi bi-calendar3 me-3 text-dark"></i>
                            {{ link.event.event_date|date:"D, M d, Y" }}
                        </div>
                        <div class="d-flex align-items-center mb-2">
                            <i class="bi bi-clock me-3 text-dark"></i>
                            {{ link.event.event_date|date:"h:i A" }}
                        </div>
                        <div class="d-flex align-items-center mb-3">
                            <i class="bi bi-geo-alt me-3 text-dark"></i>
                            {{ link.event.venue|default:"Venue TBA" }}
                        </div>
                    </div>

                    <hr class="my-4 opacity-10">

                    <div class="d-grid">
                        <a href="{% url 'manage_specific_event' link.event.event_id %}" class="btn btn-outline-dark rounded-pill py-2 fw-bold transition-all">
                            Manage Event & Attendees
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5">
            <div class="p-5 bg-white border rounded-4 shadow-sm">
                <div class="icon-box d-inline-flex rounded-circle p-4 mb-3">
                    <i class="bi bi-calendar-x text-muted" style="font-size: 2.5rem;"></i>
                </div>
                <h4 class="text-dark fw-bold">No events hosted yet</h4>
                <p class="text-muted">Once you create events, they will appear here as manageable cards.</p>
                <a href="{% url 'create_event_page' club.club_id %}" class="btn btn-dark rounded-pill px-4 mt-2">
                    Start by Creating One
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}